<%= form_for @subscriber, url: subscriber_path(@subscriber) do |f| %>

    <nav class="navbar navbar-light fixed-bottom bg-primary d-flex justify-content-center">
        <div class="d-flex justify-content-center mt-2 mb-2">
            <%= f.submit "Enregistrer mes crit√®res üöÄ", 
                class: "btn btn-outline-light", 
                style:"font-weight:600"
            %>
        </div>
    </nav>
    
        <h5 class="mb-3 mt-4" style="color: #525f7f; font-weight:400;">üìç Arrondissements ? *</h5>

   
        <div class="d-flex flex-wrap">
            <div class="form-check mr-3">
                <input 
                    type="checkbox" 
                    id="tous" 
                    class="form-check-input"
                    onclick="selectAll(className)"
                >
                <label for="tous">Tous / Aucun</label>
            </div>
        </div>


    
        <div class="d-flex flex-wrap">
                <% @areas.each do |area| %>
                    <div 
                        class="form-check mr-3 <%=area.name%> d-flex" 
                        onclick="changeColor(className)"
                        <% if @subscriber.areas.include?(area) %> 
                        style="color:#57b894"
                        <%end%>
                    >       <div>
                                <%= check_box_tag 'selected_area[]', 
                                    area.id, 
                                    @subscriber.areas.include?(area) ? true : nil,
                                    class: "form-check-input",
                                    id: area.name
                                %>
                            </div>
                            <label class="form-check-label mb-2" for="<%=area.name%>">
                                <%= area.name %>
                            </label>
    
                    </div>
                <% end %>
        </div>

        <div class="d-flex flex-wrap">
            <% @areas.each do |area| %>
            <label 
                for="<%=area.name%>"
                class="form-check mr-3 mb-2 <%=area.name%> d-flex checkbox-button box_hover"
                style="font-size: 1em;
                        border: solid 1px #ced4da;
                        padding: 5px 10px 0px 10px;
                        background: #e9ecef;
                        color: #525f7f;
                        border-radius: 36px;" 

                onclick="changeColorCheckbox(className)"
            >       <div>
                        <%= check_box_tag 'selected_areas[]', 
                            area.name, 
                            false, 
                            class: "checkbox-button-input box_hover",
                            style: "display : none",
                            id: area.name
                        %>
                    </div>
                    <div>
                        +
                    </div>
                    <span class="form-check-label mb-2 ml-1 box_hover" >
                        <%= area.name %>
                    </span>

            </label>
            <% end %>
        </div>
    
        <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">üí∞ Prix d'achat maximum ? *</h5>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">‚Ç¨</span>
            </div>
            <%= f.number_field :max_price, class: "form-control", placeholder:"Ex : 500000", min:"10000", max:"10000000", :required => true %>
        </div>
    
        <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">‚ÜîÔ∏è Surface minimum ? *</h5>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">m2</span>
            </div>
            <%= f.number_field :min_surface, type:"number", class: "form-control", placeholder:"Ex : 30", min:"8", max:"400", :required => true   %>
        </div>
    
        <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">üè° Nombre de pi√®ces minimum ? *</h5>
        <div class="input-group mb-3">
            <%= f.number_field :min_rooms_number, class: "form-control", placeholder:"Ex : 1", min:"1", max:"6", :required => true   %>
        </div>
    
        <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">üé¢ √âtage minimum ?</h5>
        <div class="input-group mb-3">
            <%= f.number_field :min_floor, class: "form-control", placeholder:"Ex : 1", min:"0", max:"8" %>
        </div>
    
        <h5 class="mt-4 mb-6" style="color: #525f7f; font-weight:400">üö† Ascenseur √† partir de quel √©tage ?</h5>
        <div class="input-group" style="margin-bottom:4.5rem">
            <%= f.number_field :min_elevator_floor, class: "form-control", placeholder:"Ex : 3", min:"0", max:"8"  %>
        </div>

        <div class="d-flex justify-content-center mt-4 mb-6">
        -------- üîî--------
        </div>
      </p>
    <% end %>
    
    
    
<script>
    
    function changeColor(className) {
      let item = document.getElementsByClassName(className)[0]
      let label = item.children[1]
      let checkboxValue = item.children[0].children[0].checked
    
      if(checkboxValue){ 
          label.style.color = "#57b894"
        }
      else{
          label.style.color = "black"
        }
    }


    function selectAll(className) {
        let all_items = document.getElementsByClassName(className)

        if(all_items[0].checked){
            for(i=1; i < 21; i++){
                all_items[i].checked = true;
                all_items[i].parentNode.nextElementSibling.style.color = "#57b894"
            }
        }
        else{
            for(i=1; i < 21; i++){
                all_items[i].checked = false;
                all_items[i].parentNode.nextElementSibling.style.color = "black"
            }
        }
    }


</script>