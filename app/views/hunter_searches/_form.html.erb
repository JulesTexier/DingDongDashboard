<%= form_for [@hunter, @hunter_search] do |f| %>

    <nav class="navbar navbar-light fixed-bottom bg-primary d-flex justify-content-center">
        <div class="d-flex justify-content-center mt-2 mb-2">
            <%= f.submit "Enregistrer mes critères 🚀",
                         class: "btn btn-outline-light",
                         style: "font-weight:600" %>
        </div>
    </nav>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">➡️ Nom de la recherche ? *</h5>
    <div class="input-group mb-3">
        <%= f.text_field :name, class: "form-control", placeholder: "Ex : Recherche 1", :required => true %>
    </div>

    <h5 class="mb-3 mt-4" style="color: #0470C1; font-weight:400;">📍 Arrondissement/ville ? *</h5>
      <div class="raw d-flex flex-wrap">

        <% @master_areas.each do |zone|%>
          <% unless zone[:zone].include?("Lyon") %>
            <h6><%= zone[:zone] %></h6>
            <div class="form-group col-12 p-0">
                <select multiple class="form-control" id="choices-multiple-remove-button" name="area_ids[]">
                    <% zone[:areas].each do |item| %>
                        <option value="<%= item[0] %>" <%= item[2] %>> <%= item[1] %></option>
                    <% end %>
                </select>
            </div>
          <% end %>
        <% end %>
      </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">💰↗️ Budget Maximum ? *</h5>
    <div class="input-group mb-3">
        <%= f.number_field :max_price, class: "form-control", placeholder: "Ex : 500000", :required => true %>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">💰↘️ Budget Minimum ?*</h5>
    <div class="input-group mb-3">
        <%= f.number_field :min_price, class: "form-control", placeholder: "Ex : 0", :required => true %>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">💰↔️ Prix Maximum au m2 ?</h5>
    <div class="input-group mb-3">
        <%= f.number_field :max_sqm_price, class: "form-control", placeholder: "Ex : 12 000", :required => false %>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">↔️ Surface minimum ? *</h5>
    <div class="input-group mb-3">
        <%= f.number_field :min_surface, class: "form-control", placeholder:"Ex : 50", max: 700, min: 6 , :required => true %>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">🏡 Nombre de pièces minimum ? *</h5>
    <div class="input-group mb-3">
        <%= f.number_field :min_rooms_number, class: "form-control", placeholder: "Ex : 2", max: 10, :required => true %>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">🎢 Etage minimum </h5>
    <div class="input-group mb-3">
        <%= f.number_field :min_floor, class: "form-control", placeholder: "Ex : 2", max: 20 %>
    </div>
    <div class="form-check form-check-inline">
        <%= f.check_box :last_floor, class: "form-check-input", type:"checkbox",  id:"last_floor", value:"true" %> 
        <label class="form-check-label" for="last_floor">Uniquement dernier étage</label>
    </div>
    

    <% if false %>
    <h5 class="mt-4 mb-6" style="color: #525f7f; font-weight:400">Maison et/ou Appartement ?</h5>
    <div class="form-check form-check-inline">
      <%= f.check_box :apartment_type, class: "form-check-input" %> 
      <%= f.label "Appartement", class: "form-check-label" %> 
    </div>
    <div class="form-check form-check-inline">
      <%= f.check_box :home_type, class: "form-check-input" %> 
      <%= f.label "Maison", class: "form-check-label" %> 
    </div>


    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">🌻 Exterieur ? </h5>
    <p class="my-2"> Attention : vous ne recevrez plus QUE des biens respectant tous ces critères </p>
    <div class="form-check form-check-inline">
        <%= f.check_box :balcony, class: "form-check-input", type:"checkbox",  id:"balcony" %> 
        <label class="form-check-label" for="balcony">Balcon</label>
    </div>
    <div class="form-check form-check-inline">
        <%= f.check_box :terrace, class: "form-check-input", type:"checkbox",  id:"terrace" %> 
        <label class="form-check-label" for="terrace">Terrasse</label>
    </div>
    <div class="form-check form-check-inline">
        <%= f.check_box :garden, class: "form-check-input", type:"checkbox",  id:"garden" %> 
        <label class="form-check-label" for="garden">Jardin</label>
    </div>

    <h5 class="mt-4 mb-3" style="color: #525f7f; font-weight:400">🏗️ Logement neuf ? </h5>
    <p class="my-2"> Attention : vous ne recevrez plus QUE des biens respectant tous ces critères </p>
    <div class="form-check form-check-inline">
        <%= f.check_box :new_construction, class: "form-check-input", type:"checkbox",  id:"new" %> 
        <label class="form-check-label" for="new">Uniquement des logements neufs</label>
    </div>
    <% end %>

    <div class="my-5 w-100 text-center">
        🔔
    </div>

<% end %>

<script>
$(document).ready(function(){
        var multipleCancelButton = new Choices('#choices-multiple-remove-button', {
        removeItemButton: true,
        maxItemCount:100,
        searchResultLimit:100,
        renderChoiceLimit:100
        });
    });
    
</script>

<style>
    .mt-100 {
        margin-top: 100px
    }
    .choices__list--multiple .choices__item{
        background-color: #57B894 !important;
        border-color: #57B894 !important;
    }
</style>

<script>
    
    function changeColor(className) {
      let item = document.getElementsByClassName(className)[0]
      let label = item.children[1]
      let checkboxValue = item.children[0].children[0].checked
    
      if(checkboxValue){ 
          label.style.color = "#57b894"
        }
      else{
          label.style.color = "black"
        }
    }


    function selectAll(className) {
        let all_items = document.getElementsByClassName(className)

        if(all_items[0].checked){
            for(i=1; i < 21; i++){
                all_items[i].checked = true;
                all_items[i].parentNode.nextElementSibling.style.color = "#57b894"
            }
        }
        else{
            for(i=1; i < 21; i++){
                all_items[i].checked = false;
                all_items[i].parentNode.nextElementSibling.style.color = "black"
            }
        }
    }


</script>